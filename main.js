(()=>{"use strict";var e={426:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(81),o=n.n(r),a=n(645),s=n.n(a)()(o());s.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Barlow&display=swap);"]),s.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap);"]),s.push([e.id,"* {\n    margin: 0;\n}\n.boards-container {\n    display: flex;\n    gap: 2rem;\n}\n.board {\n    display: grid;\n    background-color: black;\n    grid-template-columns: repeat(10, 1fr);\n    grid-template-rows: repeat(10, 1fr);\n    row-gap: 1px;\n    column-gap: 1px;\n    border: 3px solid white;\n}   \n.square {\n    background-color: hsl(210, 93%, 52%);\n}\n.square.hit {\n    background-color: hsl(0, 44%, 46%);\n}\n.square.miss {\n    background-color: hsla(219, 58%, 40%, 0.719);\n}\n.square.ship {\n    background-color: hsl(204, 49%, 33%);\n}\n.square.ship.hit {\n    background-color: hsl(0, 44%, 46%);\n}\nbody {\n    height: 100vh;\n    background-color: hsl(210, 93%, 52%);\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: space-between; \n    color: white;\n}\n#content {\n    display: flex;\n    flex-direction: column;\n    gap: 3rem;\n    padding: 2rem;\n}\n#content.horizontal {\n    flex-direction: row ;\n}\nfooter {\n    font-weight: bold;\n    padding: 0.5rem;\n    font-family: 'Courier New', Courier, monospace;\n}\nh1 {\n    padding: 3rem;\n    font-size: 3rem;\n    font-family: 'Josefin Sans', sans-serif;\n}\n.hor, .ver {\n    font-size: 1.1rem;\n    /* font-weight: bold; */\n    animation: color-fade 1500ms forwards;\n    /* animation: name duration timing-function delay iteration-count direction fill-mode; */\n}\n@keyframes color-fade {\n    0% {\n        color : black\n    }    \n    50% {\n        color : hsl(198, 13%, 64%)\n    }\n    100% {\n        color: black;\n    }\n}\n.label {\n    font-size: 1.5rem;\n}\n.message-help {\n    /* border : 1px solid black; */\n    border-radius: 5px;\n    padding: 0.5rem;\n    font-size: 1.4rem;\n    font-family: 'Barlow', sans-serif;\n    text-align: center  ;\n    font-weight: 600;\n}\n.message {\n    font-size: 2rem;\n    border: 1px solid;\n    padding: 3rem;\n    border-radius: 1rem;\n}\n.new-game {\n    font-weight: bold;\n    height: 200px;\n    width: 300px;\n    border-radius: 50px;\n    background-color: hsl(236deg 35% 21% / 61%);\n    border: none;\n    color: white;\n    font-size: 1.4rem;\n    box-shadow: 0 1px white;\n}\n.new-game:hover {\n    background-color: hsl(197, 31%, 38%);\n}\n.result {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 2rem;\n    font-family: 'Barlow';\n}\n.rotate-help {\n    font-family: 'Barlow', sans-serif;\n    display: flex;\n    flex-direction: row;\n    gap: 5rem;\n    /* align-items: center; */\n    justify-content: center;\n    font-weight: 600;\n    font-size: 1.1rem;\n}\n.rotate-help button {\n    border: none;\n    background: none;\n    color: white;\n    filter: invert(100%) sepia(93%) saturate(0%) hue-rotate(214deg) brightness(108%) contrast(105%);\n}\n.square {\n    height: 30px;\n    width: 30px;\n}\n.score {\n    font-size: 1.2rem;\n    font-family: 'Barlow', sans-serif;\n}\n.incorrect {\n    background-color: hsl(0, 100%, 68%);\n}  \n.correct {\n    /* background-color : hsl(124, 60%, 48%) */\n    background-color: hsl(202, 100%, 64%);\n} \n.board.attack.hoverable .square:hover {\n    background-color: hsl(210, 65%, 68%);\n}",""]);const l=s},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(r)for(var l=0;l<this.length;l++){var c=this[l][0];null!=c&&(s[c]=!0)}for(var i=0;i<e.length;i++){var d=[].concat(e[i]);r&&s[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},s=[],l=0;l<e.length;l++){var c=e[l],i=r.base?c[0]+r.base:c[0],d=a[i]||0,u="".concat(i," ").concat(d);a[i]=d+1;var f=n(u),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)t[f].references++,t[f].updater(m);else{var h=o(m,r);r.byIndex=l,t.splice(l,0,{identifier:u,updater:h,references:1})}s.push(u)}return s}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<a.length;s++){var l=n(a[s]);t[l].references--}for(var c=r(e,o),i=0;i<a.length;i++){var d=n(a[i]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}a=c}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={id:r,exports:{}};return e[r](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{var e=n(379),t=n.n(e),r=n(795),o=n.n(r),a=n(569),s=n.n(a),l=n(565),c=n.n(l),i=n(216),d=n.n(i),u=n(589),f=n.n(u),m=n(426),h={};h.styleTagTransform=f(),h.setAttributes=c(),h.insert=s().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=d(),t()(m.Z,h),m.Z&&m.Z.locals&&m.Z.locals;let p=document.querySelector("#content");const b=e=>{for(let t=9;t>=0;t--)for(let n=0;n<10;n++){let r=document.createElement("div");r.classList.add("square"),r.setAttribute("data-coords",[t,n]),e.append(r)}};function y(e,t){document.querySelector(".message-help").textContent=`${e.name} has sunk!`;let n=document.createElement("h3");n.classList.add(".sunken"),n.textContent=`${e.name}`,document.querySelector(`.score.${t}`).append(n)}function v(e){g(document.querySelector("#content"));const t=document.createElement("div");p.append(t),t.classList.add("result");const n=document.createElement("div");n.classList.add("label"),n.classList.add("result"),n.textContent="Game Over",t.append(n);const r=document.createElement("div");r.classList.add("message"),r.textContent="playerOne"===e?"You won!":"You lost.",t.append(r)}const g=e=>{let t=null,n=e;for(;null!==n.lastChild;)t=n,n=n.lastChild;t.removeChild(n),null!==e.lastChild&&g(e)};class S{constructor(e,t){this.size=e,this.hits=0,this.coords=null,this.name=t,this.rotation=null}hit(){this.hits+=1}isSunk(){return this.hits>=this.size}}let L=null,q=null;const x=[[1,0],[-1,0],[0,1],[0,-1]];function w(e){let t=e.target.dataset.coords,n=Number(t.charAt(0)),r=Number(t.charAt(t.length-1)),o=L.attack([n,r],q);if(void 0!==o){if(Array.isArray(o)&&(document.querySelector(".message-help").textContent="It's a miss.",e.target.classList.add("miss")),o instanceof S&&(document.querySelector(".message-help").textContent="It's a hit!",e.target.classList.add("hit"),o.isSunk()&&y(o,"two"),q.board.isSunk()))return document.querySelector(".board.attack").removeEventListener("click",w),void v("playerOne");!function(e,t){let n=E(t.playerMoves),r=t.attack([n[0],n[1]],e);if(Array.isArray(r)&&document.querySelector(`.board.defense .square[data-coords = "${n[0]},${n[1]}"]`).classList.add("miss"),r instanceof S&&(C.push([n[0],n[1]]),document.querySelector(`.board.defense .square[data-coords = "${n[0]},${n[1]}"]`).classList.add("hit"),r.isSunk()&&y(r,"one"),e.board.isSunk()))return document.querySelector(".board.attack").removeEventListener("click",w),void v("playerTwo");document.querySelector(".message-help").textContent="Open fire on enemy ships."}(L,q)}}let k=0,C=[];function E(e){if(0===C.length)return A(e);let t=C[0][0],n=C[0][1],r=$([t,n],e);return null===r?(k=0,C.shift(),E(e)):r}const $=(e,t)=>{if(k>3)return null;let n=Number(e[0])+Number(x[k][0]),r=Number(e[1])+Number(x[k][1]);return n>9||r>9||n<0||r<0||t.filter((e=>e[0]===n&&e[1]===r)).length>0?(k++,$(e,t)):[n,r]},A=e=>{let t=Math.trunc(10*Math.random()),n=Math.trunc(10*Math.random());for(let r=0;r<e.length;r++){if(t===e[r][0]&&n===e[r][1])return A(e);e.filter((e=>e[0]===t+2&&e[1]===n)).length>0&&e.filter((e=>e[0]===t-2&&e[1]===n)).length>0&&e.filter((e=>e[0]===t&&e[1]===n+2)).length>0&&e.filter((e=>e[0]===t&&e[1]===n-2))}return[t,n]};class M{constructor(){this.playedSquares=[],this.carrier=new S(5,"Carrier"),this.battleship=new S(4,"BattleShip"),this.destroyer=new S(3,"Destroyer"),this.submarine=new S(3,"Submarine"),this.patrol=new S(2,"Patrol Boat"),this.fleet=[[this.carrier],[this.battleship],[this.destroyer],[this.submarine],[this.patrol]]}place(e,[t,n],[r,o]){e.coords=[[t,n],[r,o]]}receiveAttack([e,t]){if(-1===N([e,t],this.playedSquares))return"Square already played.";this.playedSquares.push([e,t]);let n=T([e,t],this.fleet);return null!==n?(n.hit(),n):[e,t]}isSunk(){for(let e of this.fleet)if(!e[0].isSunk())return!1;return!0}}const N=([e,t],n)=>{for(let r=0;r<n.length;r++){let o=n[r][0],a=n[r][1];if(o===e&&a===t)return-1}},T=([e,t],n)=>{for(let r=0;r<n.length;r++){let o=n[r][0];if(null===o.coords)continue;let a=o.coords[0],s=o.coords[1],l=a[0],c=a[1],i=s[0],d=s[1];if(l===i&&e===l&&c<=t&&t<=d)return o;if(c===d&&t===c&&l<=e&&e<=i)return o}return null};class z{constructor(){this.board=new M,this.turn=!1,this.playerMoves=[]}attack([e,t],n){if(-1!==B([e,t],this.playerMoves))return n.board.receiveAttack([e,t])}}const B=([e,t],n)=>{for(let r=0;r<n.length;r++)if(e===n[r][0]&&t===n[r][1])return-1;return n.push([e,t]),0};let P=null,O=null;function I(e){D();let t=e.target.dataset.coords,n=Number(t.charAt(0)),r=Number(t.charAt(t.length-1));if(O=j(),P=document.querySelector("button").className,"hor"===P){let e=document.querySelectorAll(`.board.defense .square.ship[data-coords ^= "${n}"`);if(e.length>0){let t=[];for(let n=0;n<e.length;n++){let r=e[n].dataset.coords,o=Number(r.charAt(r.length-1));t.push(o)}let o=-1,a=100;for(let e=0;e<t.length;e++){let n=t[e];n>o&&(o=n),n<a&&(a=n)}if(r-O<a&&a<=r||r-O<o&&o<=r){for(let e=0;e<O;e++)document.querySelector(`.board.defense .square[data-coords = "${n},${r-e}"]`).classList.add("incorrect");return}}if(r+1-O<0){for(let e=0;e<O;e++)r-e<0||document.querySelector(`.board.defense .square[data-coords = "${n},${r-e}"]`).classList.add("incorrect");return}for(let e=0;e<O;e++)document.querySelector(`.board.defense .square[data-coords = "${n},${r-e}"]`).classList.add("correct")}else{let e=document.querySelectorAll(`.board.defense .square.ship[data-coords $= "${r}"`);if(e.length>0){let t=[];for(let n=0;n<e.length;n++){let r=e[n].dataset.coords,o=Number(r.charAt(0));t.push(o)}let o=-1,a=100;for(let e=0;e<t.length;e++){let n=t[e];n>o&&(o=n),n<a&&(a=n)}if(n-O<a&&a<=n||n-O<o&&o<=n){for(let e=0;e<O;e++)document.querySelector(`.board.defense .square[data-coords = "${n-e},${r}"]`).classList.add("incorrect");return}}if(n+1-O<0){for(let e=0;e<O;e++)n-e<0||document.querySelector(`.board.defense .square[data-coords = "${n-e},${r}"]`).classList.add("incorrect");return}for(let e=0;e<O;e++)document.querySelector(`.board.defense .square[data-coords = "${n-e},${r}"]`).classList.add("correct")}}const j=()=>{let e=document.querySelector(".message-help");return e.classList.contains("Carrier")?5:e.classList.contains("BattleShip")?4:e.classList.contains("Destroyer")||e.classList.contains("Submarine")?3:e.classList.contains("Patrol")?2:void 0},D=()=>{for(let e=0;e<10;e++)for(let t=0;t<10;t++){let n=document.querySelector(`.board.defense .square[data-coords = "${e},${t}"]`);n.classList.contains("incorrect")&&n.classList.remove("incorrect"),n.classList.contains("correct")&&n.classList.remove("correct")}};let R=new z,H=new z,Z=["Carrier","BattleShip","Destroyer","Submarine","Patrol Boat"],F=null,G=null;!function(){let e=document.createElement("h1");e.textContent="BATTLESHIP",document.querySelector("body").prepend(e);let t=document.createElement("button");t.classList.add("new-game"),p.appendChild(t),t.textContent="START NEW GAME"}(),new Promise((e=>{document.querySelector(".new-game").addEventListener("click",(()=>{(function(){let e=document.querySelectorAll("#content *");for(let t of e)p.removeChild(t);let t=document.createElement("div");t.classList.add("boards-container");let n=document.createElement("div");n.classList.add("board"),n.classList.add("defense");let r=document.createElement("div");r.classList.add("board"),r.classList.add("attack"),p.appendChild(t),t.appendChild(n),t.appendChild(r),b(n),b(r),function(){let e=document.createElement("div");e.classList.add("message-help");let t=document.createElement("div");t.classList.add("rotate-help");let n=document.createElement("div");n.textContent="Press R to rotate your ship.";let r=document.createElement("button");r.textContent="Horizontal placement",r.classList.add("hor"),p.appendChild(e),p.appendChild(t),t.appendChild(n),t.appendChild(r)}()})(),e()}))})).then((()=>{document.addEventListener("keydown",Q),V(),_(),G=R,document.querySelector(".board.defense").addEventListener("click",J),document.querySelector(".board.defense").addEventListener("mouseover",I)}));const J=e=>{let t=e.target.dataset.coords,n=document.querySelector("button").className;U(Number(t.charAt(0)),Number(t.charAt(t.length-1)),n)};function U(e,t,n){let r=W(F);if(null===r.coords){const o=Y([e,t],r.size,n),a=function([e,t],n,r){for(const[o,a]of Object.entries(G.board))if(a instanceof S&&a.name!==F){if(null===a.coords)continue;let o=a.coords[0],s=a.coords[1],l=o[0],c=o[1],i=s[0],d=s[1],u=a.rotation;if("hor"===u){if("hor"===r&&e===l&&c<=t&&t<=d+n-1)return-1;if("ver"===r&&c<=t&&t<=d&&e>=l&&e<l+n)return-1}if("ver"===u){if("hor"===r&&l<=e&&e<=i&&t>=c&&t-n+1<=c)return-1;if("ver"===r&&t===c&&l<=e&&e<=i+n-1)return-1}}}([e,t],r.size,n);if(-1!==o&&-1!==a){if(r.rotation=n,G.board.place(r,o[0],o[1]),G===R&&(([[e,t],[n,r],o],a)=>{if(document.querySelector(`.board.defense .square[data-coords = "${e},${t}"`).classList.add("ship"),"hor"===o)for(let t=0;t<a;t++)document.querySelector(`.board.defense .square[data-coords = "${e},${r-t}"]`).classList.add("ship");if("ver"===o)for(let e=0;e<a;e++)document.querySelector(`.board.defense .square[data-coords = "${n-e},${t}"]`).classList.add("ship")})(o,r.size),0===Z.length&&G===R&&(Z=["Carrier","BattleShip","Destroyer","Submarine","Patrol Boat"],document.querySelector(".message-help").textContent="LETS GET READY TO RUMBLE",G=H,document.querySelector("#content").removeChild(document.querySelector(".rotate-help")),document.removeEventListener("keydown",Q),document.querySelector(".board.defense").removeEventListener("mouseover",I),document.querySelector(".board.defense").removeEventListener("click",J)),0===Z.length&&G===H)return L=R,q=H,function(){let e=document.querySelector(".boards-container"),t=document.createElement("div");e.prepend(t),t.classList.add("score"),t.classList.add("one");let n=document.createElement("div");n.textContent="Friendly ships lost in battle",n.classList.add("label"),t.append(n);let r=document.createElement("div");e.append(r),r.classList.add("score"),r.classList.add("two");let o=document.createElement("div");o.textContent="Defeated enemy ships",o.classList.add("label"),r.append(o)}(),document.querySelector(".message-help").textContent="Open fire on enemy ships.",document.querySelector(".board.attack").addEventListener("click",w),void document.querySelector(".board.attack").classList.add("hoverable");V(),G===R&&_()}G===H&&function(){let e=K();U(e.coords[0],e.coords[1],e.rotation)}()}}const Y=([e,t],n,r)=>"hor"===r?t+1<n?-1:[[e,t-n+1],[e,t],"hor"]:"ver"===r?e+1<n?-1:[[e-n+1,t],[e,t],"ver"]:void 0,_=()=>{let e=document.querySelector(".message-help");e.textContent=`Place your ${F}`;let t=e.classList;for(let n of t)"message-help"!==n&&e.classList.remove(`${n}`);if("Patrol Boat"===F)return e.classList.add("Patrol"),void e.classList.add("Boat");e.classList.add(`${F}`)},V=()=>{F=Z.shift()},W=e=>{for(const[t,n]of Object.entries(G.board))if(n instanceof S&&n.name===e)return n},K=()=>({coords:[Math.trunc(10*Math.random()),Math.trunc(10*Math.random())],rotation:["hor","ver"][Math.random()>.5?0:1]});function Q(e){if("r"===e.key||"R"===e.key){let e=document.querySelector("button");e.classList.contains("hor")?(e.classList.remove("hor"),e.classList.add("ver"),e.textContent="Vertical placement"):e.classList.contains("ver")&&(e.classList.remove("ver"),e.classList.add("hor"),e.textContent="Horizontal placement")}}})()})();